
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../section-1/step-10/">
      
      
        <link rel="next" href="../step-02/">
      
      
      <link rel="icon" href="../../images/logo.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.34">
    
    
      
        <title>Step 1 - Implementing AI Agents - Quarkus LangChain4j Workshop</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.35f28582.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CUbuntu+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Ubuntu Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="amber">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#step-01-implementing-ai-agents" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
You are not viewing the latest version.
<a href="../../..">
    <strong>Click here to go to latest.</strong>
</a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Quarkus LangChain4j Workshop" class="md-header__button md-logo" aria-label="Quarkus LangChain4j Workshop" data-md-component="logo">
      
  <img src="../../images/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Quarkus LangChain4j Workshop
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Step 1 - Implementing AI Agents
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="amber"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 21c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-1H6zm7-4.68V17c0 .55-.45 1-1 1H6c-.55 0-1-.45-1-1v-2.26C3.19 13.47 2 11.38 2 9c0-3.87 3.13-7 7-7 1.65 0 3.16.57 4.35 1.5C10.8 4.57 9 7.07 9 10c0 2.79 1.64 5.19 4 6.32m7.92-6.38-1.42-.91-1.4.97.4-1.65-1.33-1.03 1.68-.11.56-1.61.63 1.58 1.68.04-1.3 1.08zM19.39 13c-1.89 2.27-5.36 2.19-7.17-.05C10 10.13 11.56 6 15 5.34c.34-.05.64.29.5.63-.45 1.28-.38 2.74.35 4a4.62 4.62 0 0 0 3.27 2.28c.35.05.5.49.27.75"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="orange"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 6a6 6 0 0 1 6 6c0 2.22-1.21 4.16-3 5.2V19a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1v-1.8c-1.79-1.04-3-2.98-3-5.2a6 6 0 0 1 6-6m2 15v1a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-1zm6-10h3v2h-3zM1 11h3v2H1zM13 1v3h-2V1zM4.92 3.5l2.13 2.14-1.42 1.41L3.5 4.93zm12.03 2.13 2.12-2.13 1.43 1.43-2.13 2.12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/quarkusio/quarkus-langchain4j-workshop" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Quarkus LangChain4j Workshop" class="md-nav__button md-logo" aria-label="Quarkus LangChain4j Workshop" data-md-component="logo">
      
  <img src="../../images/logo.png" alt="logo">

    </a>
    Quarkus LangChain4j Workshop
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/quarkusio/quarkus-langchain4j-workshop" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../requirements/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Requirements
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Section 1 - AI Apps
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Section 1 - AI Apps
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section-1/step-01/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Step 1 - Introduction to Quarkus LangChain4j
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section-1/step-02/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Step 2 - Playing with model parameters
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section-1/step-03/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Step 3 - Streaming responses
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section-1/step-04/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Step 4 - Using system messages
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section-1/step-05/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Step 5 - Introduction to the RAG pattern
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section-1/step-06/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Step 6 - Deconstructing the RAG
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section-1/step-07/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Step 7 - Function calling and tools
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section-1/step-08/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Step 8 - Model Context Protocol
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section-1/step-09/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Step 9 - Guardrails
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../section-1/step-10/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Step 10 - Observability and Fault Tolerance
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Section 2 - Agentic Workflows
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Section 2 - Agentic Workflows
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Step 1 - Implementing AI Agents
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Step 1 - Implementing AI Agents
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#welcome-to-section-2-agentic-systems" class="md-nav__link">
    <span class="md-ellipsis">
      Welcome to Section 2: Agentic Systems
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Welcome to Section 2: Agentic Systems">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-youll-learn" class="md-nav__link">
    <span class="md-ellipsis">
      What You&rsquo;ll Learn
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a-new-scenario-car-management-system" class="md-nav__link">
    <span class="md-ellipsis">
      A New Scenario: Car Management System
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ai-services-vs-ai-agents" class="md-nav__link">
    <span class="md-ellipsis">
      AI Services vs. AI Agents
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-the-application" class="md-nav__link">
    <span class="md-ellipsis">
      Running the Application
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Running the Application">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#understanding-the-ui" class="md-nav__link">
    <span class="md-ellipsis">
      Understanding the UI
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#try-it-out" class="md-nav__link">
    <span class="md-ellipsis">
      Try It Out
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Try It Out">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#test-1-car-needs-cleaning" class="md-nav__link">
    <span class="md-ellipsis">
      Test 1: Car Needs Cleaning
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-2-car-is-clean" class="md-nav__link">
    <span class="md-ellipsis">
      Test 2: Car Is Clean
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building-agents-with-quarkus-langchain4j" class="md-nav__link">
    <span class="md-ellipsis">
      Building Agents with Quarkus LangChain4j
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Building Agents with Quarkus LangChain4j">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#key-concepts" class="md-nav__link">
    <span class="md-ellipsis">
      Key Concepts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#key-differences" class="md-nav__link">
    <span class="md-ellipsis">
      Key Differences
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#understanding-the-application-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Understanding the Application Architecture
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#component-1-rest-api-endpoints" class="md-nav__link">
    <span class="md-ellipsis">
      Component 1: REST API Endpoints
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#component-2-business-logic-agent-invocation" class="md-nav__link">
    <span class="md-ellipsis">
      Component 2: Business Logic &amp; Agent Invocation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#component-3-the-carwashagent" class="md-nav__link">
    <span class="md-ellipsis">
      Component 3: The CarWashAgent
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Component 3: The CarWashAgent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#systemmessage" class="md-nav__link">
    <span class="md-ellipsis">
      @SystemMessage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#usermessage" class="md-nav__link">
    <span class="md-ellipsis">
      @UserMessage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agent" class="md-nav__link">
    <span class="md-ellipsis">
      @Agent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#toolbox" class="md-nav__link">
    <span class="md-ellipsis">
      @ToolBox
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#method-signature" class="md-nav__link">
    <span class="md-ellipsis">
      Method Signature
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#component-4-the-carwashtool" class="md-nav__link">
    <span class="md-ellipsis">
      Component 4: The CarWashTool
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Component 4: The CarWashTool">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#understanding-tool-execution-flow" class="md-nav__link">
    <span class="md-ellipsis">
      Understanding Tool Execution Flow
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-it-all-works-together" class="md-nav__link">
    <span class="md-ellipsis">
      How It All Works Together
    </span>
  </a>
  
    <nav class="md-nav" aria-label="How It All Works Together">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scenario-dog-hair-in-back-seat" class="md-nav__link">
    <span class="md-ellipsis">
      Scenario: Dog Hair in Back Seat
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scenario-car-looks-good" class="md-nav__link">
    <span class="md-ellipsis">
      Scenario: Car Looks Good
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-takeaways" class="md-nav__link">
    <span class="md-ellipsis">
      Key Takeaways
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#experiment-further" class="md-nav__link">
    <span class="md-ellipsis">
      Experiment Further
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Experiment Further">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-test-edge-cases" class="md-nav__link">
    <span class="md-ellipsis">
      1. Test Edge Cases
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-modify-the-system-message" class="md-nav__link">
    <span class="md-ellipsis">
      2. Modify the System Message
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-add-more-tool-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      3. Add More Tool Parameters
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#whats-next" class="md-nav__link">
    <span class="md-ellipsis">
      What&rsquo;s Next?
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../step-02/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Step 2 - Composing simple agent workflows
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../step-03/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Step 3 - Building nested agent workflows
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../step-04/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Step 4 - Using remote agents (A2A)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../conclusion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mastering Agentic Systems
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../conclusion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Conclusion
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#welcome-to-section-2-agentic-systems" class="md-nav__link">
    <span class="md-ellipsis">
      Welcome to Section 2: Agentic Systems
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Welcome to Section 2: Agentic Systems">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-youll-learn" class="md-nav__link">
    <span class="md-ellipsis">
      What You&rsquo;ll Learn
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a-new-scenario-car-management-system" class="md-nav__link">
    <span class="md-ellipsis">
      A New Scenario: Car Management System
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ai-services-vs-ai-agents" class="md-nav__link">
    <span class="md-ellipsis">
      AI Services vs. AI Agents
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-the-application" class="md-nav__link">
    <span class="md-ellipsis">
      Running the Application
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Running the Application">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#understanding-the-ui" class="md-nav__link">
    <span class="md-ellipsis">
      Understanding the UI
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#try-it-out" class="md-nav__link">
    <span class="md-ellipsis">
      Try It Out
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Try It Out">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#test-1-car-needs-cleaning" class="md-nav__link">
    <span class="md-ellipsis">
      Test 1: Car Needs Cleaning
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-2-car-is-clean" class="md-nav__link">
    <span class="md-ellipsis">
      Test 2: Car Is Clean
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building-agents-with-quarkus-langchain4j" class="md-nav__link">
    <span class="md-ellipsis">
      Building Agents with Quarkus LangChain4j
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Building Agents with Quarkus LangChain4j">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#key-concepts" class="md-nav__link">
    <span class="md-ellipsis">
      Key Concepts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#key-differences" class="md-nav__link">
    <span class="md-ellipsis">
      Key Differences
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#understanding-the-application-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Understanding the Application Architecture
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#component-1-rest-api-endpoints" class="md-nav__link">
    <span class="md-ellipsis">
      Component 1: REST API Endpoints
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#component-2-business-logic-agent-invocation" class="md-nav__link">
    <span class="md-ellipsis">
      Component 2: Business Logic &amp; Agent Invocation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#component-3-the-carwashagent" class="md-nav__link">
    <span class="md-ellipsis">
      Component 3: The CarWashAgent
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Component 3: The CarWashAgent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#systemmessage" class="md-nav__link">
    <span class="md-ellipsis">
      @SystemMessage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#usermessage" class="md-nav__link">
    <span class="md-ellipsis">
      @UserMessage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#agent" class="md-nav__link">
    <span class="md-ellipsis">
      @Agent
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#toolbox" class="md-nav__link">
    <span class="md-ellipsis">
      @ToolBox
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#method-signature" class="md-nav__link">
    <span class="md-ellipsis">
      Method Signature
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#component-4-the-carwashtool" class="md-nav__link">
    <span class="md-ellipsis">
      Component 4: The CarWashTool
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Component 4: The CarWashTool">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#understanding-tool-execution-flow" class="md-nav__link">
    <span class="md-ellipsis">
      Understanding Tool Execution Flow
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-it-all-works-together" class="md-nav__link">
    <span class="md-ellipsis">
      How It All Works Together
    </span>
  </a>
  
    <nav class="md-nav" aria-label="How It All Works Together">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scenario-dog-hair-in-back-seat" class="md-nav__link">
    <span class="md-ellipsis">
      Scenario: Dog Hair in Back Seat
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scenario-car-looks-good" class="md-nav__link">
    <span class="md-ellipsis">
      Scenario: Car Looks Good
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-takeaways" class="md-nav__link">
    <span class="md-ellipsis">
      Key Takeaways
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#experiment-further" class="md-nav__link">
    <span class="md-ellipsis">
      Experiment Further
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Experiment Further">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-test-edge-cases" class="md-nav__link">
    <span class="md-ellipsis">
      1. Test Edge Cases
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-modify-the-system-message" class="md-nav__link">
    <span class="md-ellipsis">
      2. Modify the System Message
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-add-more-tool-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      3. Add More Tool Parameters
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#whats-next" class="md-nav__link">
    <span class="md-ellipsis">
      What&rsquo;s Next?
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<div><h1 id="step-01-implementing-ai-agents">Step 01 - Implementing AI Agents<a class="headerlink" href="#step-01-implementing-ai-agents" title="Permanent link"></a></h1>
<h2 id="welcome-to-section-2-agentic-systems">Welcome to Section 2: Agentic Systems<a class="headerlink" href="#welcome-to-section-2-agentic-systems" title="Permanent link"></a></h2>
<p>Congratulations on completing Section 1! You’ve learned how to build AI-infused applications with chatbots, RAG patterns, and function calling.</p>
<p>In <strong>Section 2</strong>, we’re shifting gears to explore <strong>agentic systems</strong> — autonomous AI agents that can work together to solve complex, multi-step problems. Instead of a chatbot responding to user queries, you’ll build agents that can make decisions, use tools, and collaborate in workflows.</p>
<h3 id="what-youll-learn">What You’ll Learn<a class="headerlink" href="#what-youll-learn" title="Permanent link"></a></h3>
<p>In this step, you will:</p>
<ul>
<li>Understand the difference between <strong>AI Services</strong> (Section 1) and <strong>AI Agents</strong> (Section 2)</li>
<li>Build your first autonomous agent using the <code>quarkus-langchain4j-agentic</code> module</li>
<li>Learn how agents use tools (<em>function calling</em>) to take actions</li>
<li>See agents make decisions based on contextual information</li>
</ul>
<hr>
<h2 id="a-new-scenario-car-management-system">A New Scenario: Car Management System<a class="headerlink" href="#a-new-scenario-car-management-system" title="Permanent link"></a></h2>
<p>The <strong>Miles of Smiles</strong> car rental company needs help managing their fleet. 
Here’s the business process:</p>
<ol>
<li><strong>Rental Returns</strong>: When customers return cars, the rental team records feedback about the car’s condition.</li>
<li><strong>Car Wash Requests</strong>: Based on the feedback, the system should automatically decide if the car needs cleaning.</li>
<li><strong>Car Wash Returns</strong>: After cleaning, the car wash team provides their own feedback and returns the car.</li>
<li><strong>Fleet Availability</strong>: Clean cars with no issues return to the available pool for rental.</li>
</ol>
<p>Your job is to build an <strong>AI agent</strong> that can analyze feedback and <em>intelligently</em> decide whether to request a car wash.</p>
<hr>
<h2 id="ai-services-vs-ai-agents">AI Services vs. AI Agents<a class="headerlink" href="#ai-services-vs-ai-agents" title="Permanent link"></a></h2>
<p>Before diving into the code, let’s clarify the key differences:</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>AI Services (Section 1)</th>
<th>AI Agents (Section 2)</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Purpose</strong></td>
<td>Answer user questions</td>
<td>Perform autonomous tasks</td>
</tr>
<tr>
<td><strong>Interaction</strong></td>
<td>Reactive (responds to prompts)</td>
<td>Reactive and Proactive (takes actions)</td>
</tr>
<tr>
<td><strong>Tool Usage</strong></td>
<td>Can call tools when needed</td>
<td>Can call tools to accomplish goals</td>
</tr>
<tr>
<td><strong>Workflows</strong></td>
<td>Single-agent interactions</td>
<td>Multi-agent collaboration  (workflow or supervisor-based)</td>
</tr>
<tr>
<td><strong>Annotation</strong></td>
<td>Methods use <code>@SystemMessage</code> + <code>@UserMessage</code></td>
<td>One method per interface uses <code>@Agent</code></td>
</tr>
<tr>
<td><strong>Use Cases</strong></td>
<td>Chatbots, Q&amp;A, content generation</td>
<td>Automation, decision-making, orchestration</td>
</tr>
</tbody>
</table>
<p>In this section, you’ll see how agents extend the capabilities you learned in Section 1 to build sophisticated, autonomous systems.</p>
<hr>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link"></a></h2>
<p>Before starting, ensure you have:</p>
<ul>
<li>Completed Section 1 (or are familiar with Quarkus LangChain4j basics)</li>
<li>JDK 21+ installed</li>
<li>OpenAI API key set as <code>OPENAI_API_KEY</code> environment variable</li>
<li>A container runtime (Docker/Podman) for running a PostgreSQL <a href="https://quarkus.io/guides/databases-dev-services">dev service</a></li>
</ul>
<hr>
<h2 id="running-the-application">Running the Application<a class="headerlink" href="#running-the-application" title="Permanent link"></a></h2>
<p>Navigate to the <code>section-2/step-01</code> directory and start the application:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked id="__tabbed_1_1" name="__tabbed_1" type="radio"><input id="__tabbed_1_2" name="__tabbed_1" type="radio"><div class="tabbed-labels"><label for="__tabbed_1_1">Linux / macOS</label><label for="__tabbed_1_2">Windows</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nb">cd</span><span class="w"> </span>section-2/step-01
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>./mvnw<span class="w"> </span>quarkus:dev
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>cd section-2\step-01
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>mvnw quarkus:dev
</code></pre></div>
</div>
</div>
</div>
<p>Once started, open your browser to <a href="http://localhost:8080" target="_blank">http://localhost:8080</a>.</p>
<h3 id="understanding-the-ui">Understanding the UI<a class="headerlink" href="#understanding-the-ui" title="Permanent link"></a></h3>
<p>The application has two main sections:</p>
<ol>
<li><strong>Fleet Status</strong> (left): Shows all cars in the Miles of Smiles fleet with their current status</li>
<li><strong>Returns</strong> (right): Displays cars that are currently rented or at the car wash</li>
</ol>
<p><img alt="Agentic App UI" class="center" src="../../images/agentic-UI-1.png"></p>
<hr>
<h2 id="try-it-out">Try It Out<a class="headerlink" href="#try-it-out" title="Permanent link"></a></h2>
<p>Let’s see the agent in action!</p>
<h3 id="test-1-car-needs-cleaning">Test 1: Car Needs Cleaning<a class="headerlink" href="#test-1-car-needs-cleaning" title="Permanent link"></a></h3>
<p>Act as a rental team member processing a car return. In the <strong>Rental Return</strong> section, select a car and enter this feedback:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>Car has dog hair all over the back seat
</code></pre></div>
<p>Click the <strong>Return</strong> button.</p>
<p><strong>What happens?</strong></p>
<ul>
<li>The agent analyzes the feedback</li>
<li>Recognizes the car needs cleaning</li>
<li>Calls the <code>CarWashTool</code> to request interior cleaning</li>
<li>Updates the car’s status to <code>AT_CAR_WASH</code></li>
</ul>
<p>Check your terminal logs (you may need to scroll up). You should see output like:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>🚗 CarWashTool result: Car wash requested for Mercedes-Benz C-Class (2020), Car #6:
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>- Interior cleaning
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>Additional notes: Interior cleaning required due to dog hair in back seat.
</code></pre></div>
<h3 id="test-2-car-is-clean">Test 2: Car Is Clean<a class="headerlink" href="#test-2-car-is-clean" title="Permanent link"></a></h3>
<p>Now try returning a car that’s already clean:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>Car looks good
</code></pre></div>
<p><strong>What happens?</strong></p>
<ul>
<li>The agent analyzes the feedback</li>
<li>Determines no cleaning is needed</li>
<li>Returns <code>CARWASH_NOT_REQUIRED</code> (no tool call made)</li>
<li>Updates the car’s status to <code>AVAILABLE</code></li>
</ul>
<p>In your logs, you’ll see the agent’s response contains:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>"content":"CARWASH_NOT_REQUIRED"
</code></pre></div>
<p>Notice how the agent <strong>made a decision</strong> without calling the car wash tool. This demonstrates reasoning!</p>
<hr>
<h2 id="building-agents-with-quarkus-langchain4j">Building Agents with Quarkus LangChain4j<a class="headerlink" href="#building-agents-with-quarkus-langchain4j" title="Permanent link"></a></h2>
<p>The <a href="https://github.com/langchain4j/langchain4j/tree/main/langchain4j-agentic" target="_blank">langchain4j-agentic</a> module introduces the ability to create AI Agents.
This module is available in Quarkus using the <code>quarkus-langchain4j-agentic</code> module.
If you open the <code>pom.xml</code> file from the project, you will see this dependency:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="nt">&lt;dependency&gt;</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="w">    </span><span class="nt">&lt;groupId&gt;</span>io.quarkiverse.langchain4j<span class="nt">&lt;/groupId&gt;</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>quarkus-langchain4j-agentic<span class="nt">&lt;/artifactId&gt;</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">    </span><span class="nt">&lt;version&gt;</span>${quarkus-langchain4j.version}<span class="nt">&lt;/version&gt;</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>
<h3 id="key-concepts">Key Concepts<a class="headerlink" href="#key-concepts" title="Permanent link"></a></h3>
<p>Agents share similarities with AI Services from Section 1:</p>
<ul>
<li>Declared as interfaces (implementation generated automatically)</li>
<li>Use <code>@SystemMessage</code> to define the agent’s role and behavior</li>
<li>Use <code>@UserMessage</code> to provide request-specific context</li>
<li>Can be assigned <strong>tools</strong> to perform actions</li>
<li>Support both programmatic and declarative (annotation-based) definitions, even if in Quarkus, we recommend the declarative approach</li>
</ul>
<h3 id="key-differences">Key Differences<a class="headerlink" href="#key-differences" title="Permanent link"></a></h3>
<ul>
<li><strong>Only one method</strong> per interface can be annotated with <code>@Agent</code> - this is the agent entry point</li>
<li>Designed to be composed with for <strong>workflows</strong> or be invoked by a supervisor — agents can be composed together (more on this in Step 02)</li>
<li>Focus on <strong>autonomous actions</strong> rather than conversational responses</li>
</ul>
<hr>
<h2 id="understanding-the-application-architecture">Understanding the Application Architecture<a class="headerlink" href="#understanding-the-application-architecture" title="Permanent link"></a></h2>
<p><img alt="App Blueprint" class="center" src="../../images/agentic-app-1.png"></p>
<p>The application consists of four main components:</p>
<ol>
<li><strong>CarManagementResource</strong>: REST API endpoints</li>
<li><strong>CarManagementService</strong>: Business logic and agent orchestration</li>
<li><strong>CarWashAgent</strong>: AI agent that decides if cleaning is needed</li>
<li><strong>CarWashTool</strong>: Tool that requests car wash services</li>
</ol>
<p>Let’s explore each component.</p>
<hr>
<h2 id="component-1-rest-api-endpoints">Component 1: REST API Endpoints<a class="headerlink" href="#component-1-rest-api-endpoints" title="Permanent link"></a></h2>
<p>The <code>CarManagementResource</code> provides REST APIs to handle car returns:</p>
<div class="highlight"><span class="filename">CarManagementResource.java</span><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="cm">/**</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="cm"> * REST resource for car management operations.</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="cm"> */</span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="nd">@Path</span><span class="p">(</span><span class="s">"/car-management"</span><span class="p">)</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">CarManagementResource</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="w">    </span><span class="nd">@Inject</span>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="w">    </span><span class="n">CarManagementService</span><span class="w"> </span><span class="n">carManagementService</span><span class="p">;</span>
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="w">    </span><span class="cm">/**</span>
<a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="cm">     * Process a car return from rental.</span>
<a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a><span class="cm">     * </span>
<a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a><span class="cm">     * @param carNumber The car number</span>
<a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a><span class="cm">     * @param rentalFeedback Optional rental feedback</span>
<a id="__codelineno-7-15" name="__codelineno-7-15" href="#__codelineno-7-15"></a><span class="cm">     * @return Result of the processing</span>
<a id="__codelineno-7-16" name="__codelineno-7-16" href="#__codelineno-7-16"></a><span class="cm">     */</span>
<a id="__codelineno-7-17" name="__codelineno-7-17" href="#__codelineno-7-17"></a><span class="w">    </span><span class="nd">@POST</span>
<a id="__codelineno-7-18" name="__codelineno-7-18" href="#__codelineno-7-18"></a><span class="w">    </span><span class="nd">@Path</span><span class="p">(</span><span class="s">"/rental-return/{carNumber}"</span><span class="p">)</span>
<a id="__codelineno-7-19" name="__codelineno-7-19" href="#__codelineno-7-19"></a><span class="hll"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Response</span><span class="w"> </span><span class="nf">processRentalReturn</span><span class="p">(</span><span class="n">Long</span><span class="w"> </span><span class="n">carNumber</span><span class="p">,</span><span class="w"> </span><span class="nd">@RestQuery</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">rentalFeedback</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><a id="__codelineno-7-20" name="__codelineno-7-20" href="#__codelineno-7-20"></a>
<a id="__codelineno-7-21" name="__codelineno-7-21" href="#__codelineno-7-21"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-7-22" name="__codelineno-7-22" href="#__codelineno-7-22"></a><span class="hll"><span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">carManagementService</span><span class="p">.</span><span class="na">processCarReturn</span><span class="p">(</span><span class="n">carNumber</span><span class="p">,</span><span class="w"> </span><span class="n">rentalFeedback</span><span class="p">,</span><span class="w"> </span><span class="s">""</span><span class="p">);</span>
</span><a id="__codelineno-7-23" name="__codelineno-7-23" href="#__codelineno-7-23"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">Response</span><span class="p">.</span><span class="na">ok</span><span class="p">(</span><span class="n">result</span><span class="p">).</span><span class="na">build</span><span class="p">();</span>
<a id="__codelineno-7-24" name="__codelineno-7-24" href="#__codelineno-7-24"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-7-25" name="__codelineno-7-25" href="#__codelineno-7-25"></a><span class="w">            </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span>
<a id="__codelineno-7-26" name="__codelineno-7-26" href="#__codelineno-7-26"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">Response</span><span class="p">.</span><span class="na">status</span><span class="p">(</span><span class="n">Response</span><span class="p">.</span><span class="na">Status</span><span class="p">.</span><span class="na">INTERNAL_SERVER_ERROR</span><span class="p">)</span>
<a id="__codelineno-7-27" name="__codelineno-7-27" href="#__codelineno-7-27"></a><span class="w">                    </span><span class="p">.</span><span class="na">entity</span><span class="p">(</span><span class="s">"Error processing rental return: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">())</span>
<a id="__codelineno-7-28" name="__codelineno-7-28" href="#__codelineno-7-28"></a><span class="w">                    </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<a id="__codelineno-7-29" name="__codelineno-7-29" href="#__codelineno-7-29"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-7-30" name="__codelineno-7-30" href="#__codelineno-7-30"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-7-31" name="__codelineno-7-31" href="#__codelineno-7-31"></a>
<a id="__codelineno-7-32" name="__codelineno-7-32" href="#__codelineno-7-32"></a><span class="w">    </span><span class="cm">/**</span>
<a id="__codelineno-7-33" name="__codelineno-7-33" href="#__codelineno-7-33"></a><span class="cm">     * Process a car return from car wash.</span>
<a id="__codelineno-7-34" name="__codelineno-7-34" href="#__codelineno-7-34"></a><span class="cm">     * </span>
<a id="__codelineno-7-35" name="__codelineno-7-35" href="#__codelineno-7-35"></a><span class="cm">     * @param carNumber The car number</span>
<a id="__codelineno-7-36" name="__codelineno-7-36" href="#__codelineno-7-36"></a><span class="cm">     * @param carWashFeedback Optional car wash feedback</span>
<a id="__codelineno-7-37" name="__codelineno-7-37" href="#__codelineno-7-37"></a><span class="cm">     * @return Result of the processing</span>
<a id="__codelineno-7-38" name="__codelineno-7-38" href="#__codelineno-7-38"></a><span class="cm">     */</span>
<a id="__codelineno-7-39" name="__codelineno-7-39" href="#__codelineno-7-39"></a><span class="w">    </span><span class="nd">@POST</span>
<a id="__codelineno-7-40" name="__codelineno-7-40" href="#__codelineno-7-40"></a><span class="w">    </span><span class="nd">@Path</span><span class="p">(</span><span class="s">"/car-wash-return/{carNumber}"</span><span class="p">)</span>
<a id="__codelineno-7-41" name="__codelineno-7-41" href="#__codelineno-7-41"></a><span class="hll"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Response</span><span class="w"> </span><span class="nf">processCarWashReturn</span><span class="p">(</span><span class="n">Long</span><span class="w"> </span><span class="n">carNumber</span><span class="p">,</span><span class="w"> </span><span class="nd">@RestQuery</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">carWashFeedback</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><a id="__codelineno-7-42" name="__codelineno-7-42" href="#__codelineno-7-42"></a>
<a id="__codelineno-7-43" name="__codelineno-7-43" href="#__codelineno-7-43"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-7-44" name="__codelineno-7-44" href="#__codelineno-7-44"></a><span class="hll"><span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">carManagementService</span><span class="p">.</span><span class="na">processCarReturn</span><span class="p">(</span><span class="n">carNumber</span><span class="p">,</span><span class="w"> </span><span class="s">""</span><span class="p">,</span><span class="w"> </span><span class="n">carWashFeedback</span><span class="p">);</span>
</span><a id="__codelineno-7-45" name="__codelineno-7-45" href="#__codelineno-7-45"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">Response</span><span class="p">.</span><span class="na">ok</span><span class="p">(</span><span class="n">result</span><span class="p">).</span><span class="na">build</span><span class="p">();</span>
<a id="__codelineno-7-46" name="__codelineno-7-46" href="#__codelineno-7-46"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-7-47" name="__codelineno-7-47" href="#__codelineno-7-47"></a><span class="w">            </span><span class="n">Log</span><span class="p">.</span><span class="na">error</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">(),</span><span class="w"> </span><span class="n">e</span><span class="p">);</span>
<a id="__codelineno-7-48" name="__codelineno-7-48" href="#__codelineno-7-48"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">Response</span><span class="p">.</span><span class="na">status</span><span class="p">(</span><span class="n">Response</span><span class="p">.</span><span class="na">Status</span><span class="p">.</span><span class="na">INTERNAL_SERVER_ERROR</span><span class="p">)</span>
<a id="__codelineno-7-49" name="__codelineno-7-49" href="#__codelineno-7-49"></a><span class="w">                    </span><span class="p">.</span><span class="na">entity</span><span class="p">(</span><span class="s">"Error processing car wash return: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">getMessage</span><span class="p">())</span>
<a id="__codelineno-7-50" name="__codelineno-7-50" href="#__codelineno-7-50"></a><span class="w">                    </span><span class="p">.</span><span class="na">build</span><span class="p">();</span>
<a id="__codelineno-7-51" name="__codelineno-7-51" href="#__codelineno-7-51"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-7-52" name="__codelineno-7-52" href="#__codelineno-7-52"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-7-53" name="__codelineno-7-53" href="#__codelineno-7-53"></a><span class="p">}</span>
</code></pre></div>
<p><strong>Key Points:</strong></p>
<ul>
<li>The <code>processRentalReturn</code> method (endpoint <code>/car-management/rental-return/{carNumber}</code>):  Accepts feedback from the rental team</li>
<li>The <code>processCarWashReturn</code> method (endpoint <code>/car-management/car-wash-return/{carNumber}</code>): Accepts feedback from the car wash team</li>
<li>Both endpoints delegate to <code>CarManagementService.processCarReturn</code></li>
</ul>
<hr>
<h2 id="component-2-business-logic-agent-invocation">Component 2: Business Logic &amp; Agent Invocation<a class="headerlink" href="#component-2-business-logic-agent-invocation" title="Permanent link"></a></h2>
<p>The <code>CarManagementService</code> orchestrates the car return process:</p>
<div class="highlight"><span class="filename">CarManagementService.java</span><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="cm">/**</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="cm"> * Process a car return from any operation.</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="cm"> *</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="cm"> * @param carNumber The car number</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="cm"> * @param rentalFeedback Optional rental feedback</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="cm"> * @param carWashFeedback Optional car wash feedback</span>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="cm"> * @return Result of the processing</span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="cm"> */</span>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="nd">@Transactional</span>
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">processCarReturn</span><span class="p">(</span><span class="n">Long</span><span class="w"> </span><span class="n">carNumber</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">rentalFeedback</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">carWashFeedback</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a><span class="w">    </span><span class="n">CarInfo</span><span class="w"> </span><span class="n">carInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CarInfo</span><span class="p">.</span><span class="na">findById</span><span class="p">(</span><span class="n">carNumber</span><span class="p">);</span>
<a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">carInfo</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">"Car not found with number: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">carNumber</span><span class="p">;</span>
<a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a>
<a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a><span class="w">    </span><span class="c1">// Process the car result</span>
<a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">carWashAgent</span><span class="p">.</span><span class="na">processCarWash</span><span class="p">(</span>
<a id="__codelineno-8-18" name="__codelineno-8-18" href="#__codelineno-8-18"></a><span class="w">            </span><span class="n">carInfo</span><span class="p">.</span><span class="na">make</span><span class="p">,</span>
<a id="__codelineno-8-19" name="__codelineno-8-19" href="#__codelineno-8-19"></a><span class="w">            </span><span class="n">carInfo</span><span class="p">.</span><span class="na">model</span><span class="p">,</span>
<a id="__codelineno-8-20" name="__codelineno-8-20" href="#__codelineno-8-20"></a><span class="w">            </span><span class="n">carInfo</span><span class="p">.</span><span class="na">year</span><span class="p">,</span>
<a id="__codelineno-8-21" name="__codelineno-8-21" href="#__codelineno-8-21"></a><span class="w">            </span><span class="n">carNumber</span><span class="p">,</span>
<a id="__codelineno-8-22" name="__codelineno-8-22" href="#__codelineno-8-22"></a><span class="w">            </span><span class="n">rentalFeedback</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">rentalFeedback</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s">""</span><span class="p">,</span>
<a id="__codelineno-8-23" name="__codelineno-8-23" href="#__codelineno-8-23"></a><span class="w">            </span><span class="n">carWashFeedback</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">carWashFeedback</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s">""</span><span class="p">);</span>
<a id="__codelineno-8-24" name="__codelineno-8-24" href="#__codelineno-8-24"></a>
<a id="__codelineno-8-25" name="__codelineno-8-25" href="#__codelineno-8-25"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">toUpperCase</span><span class="p">().</span><span class="na">contains</span><span class="p">(</span><span class="s">"CARWASH_NOT_REQUIRED"</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-26" name="__codelineno-8-26" href="#__codelineno-8-26"></a><span class="w">        </span><span class="n">carInfo</span><span class="p">.</span><span class="na">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CarStatus</span><span class="p">.</span><span class="na">AVAILABLE</span><span class="p">;</span>
<a id="__codelineno-8-27" name="__codelineno-8-27" href="#__codelineno-8-27"></a><span class="w">        </span><span class="n">carInfo</span><span class="p">.</span><span class="na">persist</span><span class="p">();</span>
<a id="__codelineno-8-28" name="__codelineno-8-28" href="#__codelineno-8-28"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-8-29" name="__codelineno-8-29" href="#__codelineno-8-29"></a>
<a id="__codelineno-8-30" name="__codelineno-8-30" href="#__codelineno-8-30"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">;</span>
<a id="__codelineno-8-31" name="__codelineno-8-31" href="#__codelineno-8-31"></a><span class="p">}</span>
</code></pre></div>
<p><strong>Key Points:</strong></p>
<ul>
<li>The <code>CarWashAgent</code> field is injected as a CDI bean</li>
<li>
<p>In the <code>processCarReturn</code> method, the agent is invoked with car details and feedback. The response is checked for <code>CARWASH_NOT_REQUIRED</code>:</p>
<ul>
<li>If found → Car marked as <code>AVAILABLE</code></li>
<li>If not found → Car stays <code>AT_CAR_WASH</code> (tool was called)</li>
</ul>
</li>
</ul>
<p>This simple pattern allows you to integrate autonomous decision-making into your business logic!</p>
<hr>
<h2 id="component-3-the-carwashagent">Component 3: The CarWashAgent<a class="headerlink" href="#component-3-the-carwashagent" title="Permanent link"></a></h2>
<p>Here’s where the magic happens — the AI agent definition:</p>
<div class="highlight"><span class="filename">CarWashAgent.java</span><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="cm">/**</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="cm"> * Agent that determines what car wash services to request.</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="cm"> */</span>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">CarWashAgent</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="w">    </span><span class="nd">@SystemMessage</span><span class="p">(</span><span class="s">"""</span>
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="s">        You handle intake for the car wash department of a car rental company.</span>
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="s">        It is your job to submit a request to the provided requestCarWash function to take action based on the provided feedback.</span>
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="s">        Be specific about what services are needed.</span>
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="s">        If no car wash is needed based on the feedback, respond with "CARWASH_NOT_REQUIRED".</span>
<a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a><span class="s">        """</span><span class="p">)</span>
<a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a><span class="w">    </span><span class="nd">@UserMessage</span><span class="p">(</span><span class="s">"""</span>
<a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a><span class="s">        Car Information:</span>
<a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a><span class="s">        Make: {carMake}</span>
<a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a><span class="s">        Model: {carModel}</span>
<a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a><span class="s">        Year: {carYear}</span>
<a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a><span class="s">        Car Number: {carNumber}</span>
<a id="__codelineno-9-18" name="__codelineno-9-18" href="#__codelineno-9-18"></a>
<a id="__codelineno-9-19" name="__codelineno-9-19" href="#__codelineno-9-19"></a><span class="s">        Feedback:</span>
<a id="__codelineno-9-20" name="__codelineno-9-20" href="#__codelineno-9-20"></a><span class="s">        Rental Feedback: {rentalFeedback}</span>
<a id="__codelineno-9-21" name="__codelineno-9-21" href="#__codelineno-9-21"></a><span class="s">        Car Wash Feedback: {carWashFeedback}</span>
<a id="__codelineno-9-22" name="__codelineno-9-22" href="#__codelineno-9-22"></a><span class="s">        """</span><span class="p">)</span>
<a id="__codelineno-9-23" name="__codelineno-9-23" href="#__codelineno-9-23"></a><span class="w">    </span><span class="nd">@Agent</span><span class="p">(</span><span class="s">"Car wash specialist. Determines what car wash services are needed."</span><span class="p">)</span>
<a id="__codelineno-9-24" name="__codelineno-9-24" href="#__codelineno-9-24"></a><span class="w">    </span><span class="nd">@ToolBox</span><span class="p">(</span><span class="n">CarWashTool</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<a id="__codelineno-9-25" name="__codelineno-9-25" href="#__codelineno-9-25"></a><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="nf">processCarWash</span><span class="p">(</span>
<a id="__codelineno-9-26" name="__codelineno-9-26" href="#__codelineno-9-26"></a><span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">carMake</span><span class="p">,</span>
<a id="__codelineno-9-27" name="__codelineno-9-27" href="#__codelineno-9-27"></a><span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">carModel</span><span class="p">,</span>
<a id="__codelineno-9-28" name="__codelineno-9-28" href="#__codelineno-9-28"></a><span class="w">            </span><span class="n">Integer</span><span class="w"> </span><span class="n">carYear</span><span class="p">,</span>
<a id="__codelineno-9-29" name="__codelineno-9-29" href="#__codelineno-9-29"></a><span class="w">            </span><span class="n">Long</span><span class="w"> </span><span class="n">carNumber</span><span class="p">,</span>
<a id="__codelineno-9-30" name="__codelineno-9-30" href="#__codelineno-9-30"></a><span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">rentalFeedback</span><span class="p">,</span>
<a id="__codelineno-9-31" name="__codelineno-9-31" href="#__codelineno-9-31"></a><span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">carWashFeedback</span><span class="p">);</span>
<a id="__codelineno-9-32" name="__codelineno-9-32" href="#__codelineno-9-32"></a><span class="p">}</span>
</code></pre></div>
<p><strong>Let’s break it down:</strong></p>
<h3 id="systemmessage"><code>@SystemMessage</code><a class="headerlink" href="#systemmessage" title="Permanent link"></a></h3>
<p>Defines the agent’s <strong>role</strong> and <strong>decision-making logic</strong>:</p>
<ul>
<li>Acts as the intake specialist for the car wash department</li>
<li>Should call the <code>requestCarWash</code> function when cleaning is needed</li>
<li>Should be specific about which services to request</li>
<li>Should return <code>CARWASH_NOT_REQUIRED</code> if no cleaning is needed</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Pro Tip: Clear Instructions Matter</p>
<p>The system message is critical! It tells the agent:</p>
<ul>
<li><strong>WHO</strong> it is (car wash intake specialist)</li>
<li><strong>WHAT</strong> to do (submit car wash requests)</li>
<li><strong>WHEN</strong> to act (based on feedback)</li>
<li><strong>HOW</strong> to respond (specific services or <code>CARWASH_NOT_REQUIRED</code>)</li>
</ul>
</div>
<h3 id="usermessage"><code>@UserMessage</code><a class="headerlink" href="#usermessage" title="Permanent link"></a></h3>
<p>Provides <strong>context</strong> for each request using template variables:</p>
<ul>
<li>Car details: <code>{carMake}</code>, <code>{carModel}</code>, <code>{carYear}</code>, <code>{carNumber}</code></li>
<li>Feedback sources: <code>{rentalFeedback}</code>, <code>{carWashFeedback}</code></li>
</ul>
<p>These variables are automatically populated from the method parameters.</p>
<h3 id="agent"><code>@Agent</code><a class="headerlink" href="#agent" title="Permanent link"></a></h3>
<p>Marks this as an <strong>agent method</strong> — only one per interface.</p>
<ul>
<li>Provides a description: “Car wash specialist. Determines what car wash services are needed.”</li>
<li>This description can be used by other agents or systems to understand this agent’s purpose</li>
</ul>
<h3 id="toolbox"><code>@ToolBox</code><a class="headerlink" href="#toolbox" title="Permanent link"></a></h3>
<p>Assigns the <code>CarWashTool</code> to this agent:</p>
<ul>
<li>The agent can call methods in this tool to perform actions</li>
<li>The LLM decides when and how to use the tool based on the task (function calling has been covered in the section-1 of the workshop)</li>
</ul>
<h3 id="method-signature">Method Signature<a class="headerlink" href="#method-signature" title="Permanent link"></a></h3>
<p>Defines the inputs and output:</p>
<ul>
<li><strong>Inputs</strong>: All the context the agent needs to make decisions</li>
<li><strong>Output</strong>: <code>String</code> — the agent’s response (either tool result or <code>CARWASH_NOT_REQUIRED</code>)</li>
</ul>
<div class="admonition info">
<p class="admonition-title">No Implementation Required</p>
<p>Notice there’s <strong>no method body</strong>! LangChain4j automatically generates the implementation:</p>
<ol>
<li>Receives the inputs</li>
<li>Sends the system + user messages to the LLM</li>
<li>If the LLM wants to call the tool, it does so</li>
<li>Returns the final response</li>
</ol>
</div>
<hr>
<h2 id="component-4-the-carwashtool">Component 4: The CarWashTool<a class="headerlink" href="#component-4-the-carwashtool" title="Permanent link"></a></h2>
<p>Tools enable agents to take <strong>actions</strong> in the real world:</p>
<div class="highlight"><span class="filename">CarWashTool.java</span><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="cm">/**</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="cm"> * Tool for requesting car wash operations.</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="cm"> */</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="hll"><span class="nd">@Dependent</span>
</span><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">CarWashTool</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="w">    </span><span class="cm">/**</span>
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="cm">     * Requests a car wash based on the provided parameters.</span>
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="cm">     *</span>
<a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="cm">     * @param carNumber The car number</span>
<a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="cm">     * @param carMake The car make</span>
<a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="cm">     * @param carModel The car model</span>
<a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a><span class="cm">     * @param carYear The car year</span>
<a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a><span class="cm">     * @param exteriorWash Whether to request exterior wash</span>
<a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a><span class="cm">     * @param interiorCleaning Whether to request interior cleaning</span>
<a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a><span class="cm">     * @param detailing Whether to request detailing</span>
<a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a><span class="cm">     * @param waxing Whether to request waxing</span>
<a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a><span class="cm">     * @param requestText The car wash request text</span>
<a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a><span class="cm">     * @return A summary of the car wash request</span>
<a id="__codelineno-10-20" name="__codelineno-10-20" href="#__codelineno-10-20"></a><span class="cm">     */</span>
<a id="__codelineno-10-21" name="__codelineno-10-21" href="#__codelineno-10-21"></a><span class="hll"><span class="w">    </span><span class="nd">@Tool</span><span class="p">(</span><span class="s">"Requests a car wash with the specified options"</span><span class="p">)</span>
</span><a id="__codelineno-10-22" name="__codelineno-10-22" href="#__codelineno-10-22"></a><span class="w">    </span><span class="nd">@Transactional</span>
<a id="__codelineno-10-23" name="__codelineno-10-23" href="#__codelineno-10-23"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">requestCarWash</span><span class="p">(</span>
<a id="__codelineno-10-24" name="__codelineno-10-24" href="#__codelineno-10-24"></a><span class="w">            </span><span class="n">Long</span><span class="w"> </span><span class="n">carNumber</span><span class="p">,</span>
<a id="__codelineno-10-25" name="__codelineno-10-25" href="#__codelineno-10-25"></a><span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">carMake</span><span class="p">,</span>
<a id="__codelineno-10-26" name="__codelineno-10-26" href="#__codelineno-10-26"></a><span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">carModel</span><span class="p">,</span>
<a id="__codelineno-10-27" name="__codelineno-10-27" href="#__codelineno-10-27"></a><span class="w">            </span><span class="n">Integer</span><span class="w"> </span><span class="n">carYear</span><span class="p">,</span>
<a id="__codelineno-10-28" name="__codelineno-10-28" href="#__codelineno-10-28"></a><span class="w">            </span><span class="kt">boolean</span><span class="w"> </span><span class="n">exteriorWash</span><span class="p">,</span>
<a id="__codelineno-10-29" name="__codelineno-10-29" href="#__codelineno-10-29"></a><span class="w">            </span><span class="kt">boolean</span><span class="w"> </span><span class="n">interiorCleaning</span><span class="p">,</span>
<a id="__codelineno-10-30" name="__codelineno-10-30" href="#__codelineno-10-30"></a><span class="w">            </span><span class="kt">boolean</span><span class="w"> </span><span class="n">detailing</span><span class="p">,</span>
<a id="__codelineno-10-31" name="__codelineno-10-31" href="#__codelineno-10-31"></a><span class="w">            </span><span class="kt">boolean</span><span class="w"> </span><span class="n">waxing</span><span class="p">,</span>
<a id="__codelineno-10-32" name="__codelineno-10-32" href="#__codelineno-10-32"></a><span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">requestText</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-33" name="__codelineno-10-33" href="#__codelineno-10-33"></a>
<a id="__codelineno-10-34" name="__codelineno-10-34" href="#__codelineno-10-34"></a><span class="w">        </span><span class="c1">// In a real implementation, this would make an API call to a car wash service</span>
<a id="__codelineno-10-35" name="__codelineno-10-35" href="#__codelineno-10-35"></a><span class="w">        </span><span class="c1">// or update a database with the car wash request</span>
<a id="__codelineno-10-36" name="__codelineno-10-36" href="#__codelineno-10-36"></a>
<a id="__codelineno-10-37" name="__codelineno-10-37" href="#__codelineno-10-37"></a><span class="w">        </span><span class="c1">// Update car status to AT_CAR_WASH</span>
<a id="__codelineno-10-38" name="__codelineno-10-38" href="#__codelineno-10-38"></a><span class="w">        </span><span class="n">CarInfo</span><span class="w"> </span><span class="n">carInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CarInfo</span><span class="p">.</span><span class="na">findById</span><span class="p">(</span><span class="n">carNumber</span><span class="p">);</span>
<a id="__codelineno-10-39" name="__codelineno-10-39" href="#__codelineno-10-39"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">carInfo</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-40" name="__codelineno-10-40" href="#__codelineno-10-40"></a><span class="hll"><span class="w">            </span><span class="n">carInfo</span><span class="p">.</span><span class="na">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CarStatus</span><span class="p">.</span><span class="na">AT_CAR_WASH</span><span class="p">;</span>
</span><a id="__codelineno-10-41" name="__codelineno-10-41" href="#__codelineno-10-41"></a><span class="w">            </span><span class="n">carInfo</span><span class="p">.</span><span class="na">persist</span><span class="p">();</span>
<a id="__codelineno-10-42" name="__codelineno-10-42" href="#__codelineno-10-42"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-10-43" name="__codelineno-10-43" href="#__codelineno-10-43"></a>
<a id="__codelineno-10-44" name="__codelineno-10-44" href="#__codelineno-10-44"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">generateCarWashSummary</span><span class="p">(</span><span class="n">carNumber</span><span class="p">,</span><span class="w"> </span><span class="n">carMake</span><span class="p">,</span><span class="w"> </span><span class="n">carModel</span><span class="p">,</span><span class="w"> </span><span class="n">carYear</span><span class="p">,</span>
<a id="__codelineno-10-45" name="__codelineno-10-45" href="#__codelineno-10-45"></a><span class="w">                                              </span><span class="n">exteriorWash</span><span class="p">,</span><span class="w"> </span><span class="n">interiorCleaning</span><span class="p">,</span><span class="w"> </span><span class="n">detailing</span><span class="p">,</span>
<a id="__codelineno-10-46" name="__codelineno-10-46" href="#__codelineno-10-46"></a><span class="w">                                              </span><span class="n">waxing</span><span class="p">,</span><span class="w"> </span><span class="n">requestText</span><span class="p">);</span>
<a id="__codelineno-10-47" name="__codelineno-10-47" href="#__codelineno-10-47"></a><span class="hll"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"\uD83D\uDE97 CarWashTool result: "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">result</span><span class="p">);</span>
</span><a id="__codelineno-10-48" name="__codelineno-10-48" href="#__codelineno-10-48"></a><span class="hll"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">;</span>
</span><a id="__codelineno-10-49" name="__codelineno-10-49" href="#__codelineno-10-49"></a><span class="w">    </span><span class="p">}</span>
</code></pre></div>
<p><strong>Key Points:</strong></p>
<ul>
<li><code>@Dependent</code> scope is required (see explanation below)</li>
<li><code>@Tool</code> annotation exposes this method to agents<ul>
<li>The description helps the LLM understand when to use this tool</li>
<li>Parameters define what information the agent must provide</li>
</ul>
</li>
<li>The method updates the car status to <code>AT_CAR_WASH</code>, if the <code>carInfo</code> is not <code>null</code></li>
<li>The method returns a summary of the request (and prints a log messages)</li>
</ul>
<h3 id="understanding-tool-execution-flow">Understanding Tool Execution Flow<a class="headerlink" href="#understanding-tool-execution-flow" title="Permanent link"></a></h3>
<p>Here is the sequence of actions happening when the agent is invoked:</p>
<ol>
<li>Agent receives car return feedback (entered by the user)</li>
<li>LLM analyzes the feedback</li>
<li>LLM decides to call <code>requestCarWash</code> (or not, depending on the feedback)</li>
<li>If called, LLM determines which parameters to use:<ul>
<li>Should <code>interiorCleaning</code> be true?</li>
<li>Should <code>exteriorWash</code> be true?</li>
<li>What <code>requestText</code> should be included?</li>
</ul>
</li>
<li>Tool executes and returns a result</li>
<li>Agent receives the result and can respond</li>
</ol>
<details class="question">
<summary>Why do we use @Dependent scope for the Tool?</summary>
<p>When a tool is added to an agent, LangChain4j introspects the tool object to find methods with <code>@Tool</code> annotations.</p>
<p><strong>The Problem with Other Scopes:</strong>
CDI creates proxies for beans with scopes like <code>@ApplicationScoped</code> or <code>@SessionScoped</code>. These proxy objects don’t preserve the <code>@Tool</code> annotations, so LangChain4j can’t detect them.</p>
<p><strong>The Solution:</strong>
Use <code>@Dependent</code> scope, which doesn’t create proxies, allowing LangChain4j to see the annotations directly.</p>
<p><strong>Alternative:</strong>
If you need other CDI scopes, you can use a <code>ToolProvider</code> to manually register tools (not covered in this workshop).</p>
</details>
<hr>
<h2 id="how-it-all-works-together">How It All Works Together<a class="headerlink" href="#how-it-all-works-together" title="Permanent link"></a></h2>
<p>Let’s trace through a complete example:</p>
<h3 id="scenario-dog-hair-in-back-seat">Scenario: Dog Hair in Back Seat<a class="headerlink" href="#scenario-dog-hair-in-back-seat" title="Permanent link"></a></h3>
<pre class="mermaid"><code>sequenceDiagram
    participant User
    participant REST as CarManagementResource
    participant Service as CarManagementService
    participant Agent as CarWashAgent
    participant LLM as OpenAI LLM
    participant Tool as CarWashTool

    User-&gt;&gt;REST: POST /rental-return/6&lt;br/&gt;feedback: "Dog hair in back seat"
    REST-&gt;&gt;Service: processCarReturn(6, "Dog hair...", "")
    Service-&gt;&gt;Agent: processCarWash(...)
    Agent-&gt;&gt;LLM: System: You handle car wash intake...&lt;br/&gt;User: Car #6, feedback: "Dog hair..."
    LLM-&gt;&gt;LLM: Analyze feedback&lt;br/&gt;Decision: Needs interior cleaning
    LLM-&gt;&gt;Tool: requestCarWash(&lt;br/&gt;  carNumber: 6,&lt;br/&gt;  interiorCleaning: true,&lt;br/&gt;  requestText: "Dog hair removal"&lt;br/&gt;)
    Tool-&gt;&gt;Tool: Update car status to AT_CAR_WASH
    Tool--&gt;&gt;LLM: "Car wash requested: Interior cleaning..."
    LLM--&gt;&gt;Agent: "Car wash requested: Interior cleaning..."
    Agent--&gt;&gt;Service: "Car wash requested: Interior cleaning..."
    Service-&gt;&gt;Service: Check if contains "CARWASH_NOT_REQUIRED"&lt;br/&gt;No → Keep status AT_CAR_WASH
    Service--&gt;&gt;REST: Result message
    REST--&gt;&gt;User: 200 OK</code></pre>
<h3 id="scenario-car-looks-good">Scenario: Car Looks Good<a class="headerlink" href="#scenario-car-looks-good" title="Permanent link"></a></h3>
<pre class="mermaid"><code>sequenceDiagram
    participant User
    participant REST as CarManagementResource
    participant Service as CarManagementService
    participant Agent as CarWashAgent
    participant LLM as OpenAI LLM

    User-&gt;&gt;REST: POST /rental-return/3&lt;br/&gt;feedback: "Car looks good"
    REST-&gt;&gt;Service: processCarReturn(3, "Car looks good", "")
    Service-&gt;&gt;Agent: processCarWash(...)
    Agent-&gt;&gt;LLM: System: You handle car wash intake...&lt;br/&gt;User: Car #3, feedback: "Car looks good"
    LLM-&gt;&gt;LLM: Analyze feedback&lt;br/&gt;Decision: No cleaning needed
    LLM--&gt;&gt;Agent: "CARWASH_NOT_REQUIRED"
    Agent--&gt;&gt;Service: "CARWASH_NOT_REQUIRED"
    Service-&gt;&gt;Service: Check if contains "CARWASH_NOT_REQUIRED"&lt;br/&gt;Yes → Set status to AVAILABLE
    Service--&gt;&gt;REST: Result message
    REST--&gt;&gt;User: 200 OK</code></pre>
<hr>
<h2 id="key-takeaways">Key Takeaways<a class="headerlink" href="#key-takeaways" title="Permanent link"></a></h2>
<p><strong>Agents are autonomous</strong>: They make decisions and take actions based on context.
<strong>Tools enable actions</strong>: Agents use tools to interact with systems (databases, APIs, etc.)
<strong>Clear prompts matter</strong>: The <code>@SystemMessage</code> guides the agent’s decision-making
<strong>Type-safe interfaces</strong>: No manual API calls — just define interfaces and let Quarkus LangChain4j handle the rest
<strong>CDI integration</strong>: Agents and tools are managed beans that integrate seamlessly with Quarkus</p>
<hr>
<h2 id="experiment-further">Experiment Further<a class="headerlink" href="#experiment-further" title="Permanent link"></a></h2>
<p>Try these experiments to deepen your understanding:</p>
<h3 id="1-test-edge-cases">1. Test Edge Cases<a class="headerlink" href="#1-test-edge-cases" title="Permanent link"></a></h3>
<p>Try different feedback scenarios:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>The trunk smells like fish
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>Minor scratch on the bumper
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>Spotless condition
</code></pre></div>
<p>What does the agent decide for each? Does it call the car wash tool?</p>
<h3 id="2-modify-the-system-message">2. Modify the System Message<a class="headerlink" href="#2-modify-the-system-message" title="Permanent link"></a></h3>
<p>Edit <code>CarWashAgent.java</code> and change the system message. For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="nd">@SystemMessage</span><span class="p">(</span><span class="s">"""</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="s">    You are a very picky car wash intake specialist.</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="s">    Request a full detail (exterior, interior, waxing, detailing)</span>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="s">    unless the car is absolutely perfect.</span>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="s">    If perfect, respond with "CARWASH_NOT_REQUIRED".</span>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="s">    """</span><span class="p">)</span>
</code></pre></div>
<p>How does this change the agent’s behavior?</p>
<h3 id="3-add-more-tool-parameters">3. Add More Tool Parameters<a class="headerlink" href="#3-add-more-tool-parameters" title="Permanent link"></a></h3>
<p>Edit <code>CarWashTool.java</code> to add a <code>tireCleaning</code> parameter. 
Does the agent automatically learn to use it?</p>
<hr>
<h2 id="troubleshooting">Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permanent link"></a></h2>
<details class="warning">
<summary>Error: OPENAI_API_KEY not set</summary>
<p>Make sure you’ve exported the environment variable:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="nb">export</span><span class="w"> </span><span class="nv">OPENAI_API_KEY</span><span class="o">=</span>sk-your-key-here
</code></pre></div>
<p>Then restart the application.</p>
</details>
<details class="warning">
<summary>Tool methods not being called</summary>
<ul>
<li>Verify the tool uses <code>@Dependent</code> scope</li>
<li>Check that the <code>@Tool</code> annotation is present</li>
<li>Ensure the tool is properly referenced in <code>@ToolBox</code></li>
</ul>
</details>
<details class="warning">
<summary>Agent always/never calls the tool</summary>
<ul>
<li>Review your <code>@SystemMessage</code> — is it clear about when to use the tool?</li>
<li>Try adding more explicit instructions</li>
<li>Consider providing examples in the system message</li>
</ul>
</details>
<hr>
<h2 id="whats-next">What’s Next?<a class="headerlink" href="#whats-next" title="Permanent link"></a></h2>
<p>In this step, you built a <strong>single autonomous agent</strong> that makes decisions and uses tools.</p>
<p>In <strong>Step 02</strong>, you’ll learn how to compose <strong>multiple agents into workflows</strong> — where agents collaborate to solve complex problems together!</p>
<p><a href="../step-02/">Continue to Step 02 - Composing Simple Agent Workflows</a></p></div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../../section-1/step-10/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Step 10 - Observability and Fault Tolerance">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Step 10 - Observability and Fault Tolerance
              </div>
            </div>
          </a>
        
        
          
          <a href="../step-02/" class="md-footer__link md-footer__link--next" aria-label="Next: Step 2 - Composing simple agent workflows">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Step 2 - Composing simple agent workflows
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <!--
  Copyright (c) 2016-2022 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Copyright and theme information, adapter to have the Red Hat footer -->
<div class="md-copyright">
    <div class="md-copyright__highlight">
        Sponsored by <a href="https://www.redhat.com"><img style="vertical-align: middle;" alt="Red Hat" src="../../images/redhat_reversed.svg"/></a> <br/>
        <a href="https://creativecommons.org/licenses/by/3.0/">CC by 3.0</a> |
        <a href="https://www.redhat.com/en/about/privacy-policy">Privacy Policy</a>
    </div>
    
    Made with
    <a
            href="https://squidfunk.github.io/mkdocs-material/"
            target="_blank" rel="noopener"
    >
        Material for MkDocs
    </a>
    
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.sections", "content.tabs.link", "content.code.annotate", "navigation.instant", "navigation.indexes", "navigation.tracking", "navigation.footer", "navigation.tabs.sticky", "content.code.select", "content.code.copy"], "search": "../../assets/javascripts/workers/search.07f07601.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.56dfad97.min.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>